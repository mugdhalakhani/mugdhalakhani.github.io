<html>
<body>
<script>
function BgfEnabed() {return !!BackgroundFetchRegistration;}

function doFetch(bgManager) {
	bgManager.getIds().then((ids) => {console.log('getIds returns ', ids)});
    	const options = {
	  icons: [
          {
      	    src: '../resources/icons/18.png',
            sizes: '3333x5230',
            type: 'image/png'
          },
          {
      	    src: '../resources/icons/13.png',
            sizes: '256x256',
            type: 'image/png'
          },
          {
      	    src: '../resources/icons/question.png',
            sizes: '128x128',
            type: 'image/png'
          },
          {
      	    src: '../resources/icons/9.png',
            sizes: '256x256',
            type: 'image/png'
          },
      ],
      title: 'Fetching files'
    };
	bgManager.fetch('id6', ['domokun.jpg', '../resources/files/Pride_and_Prejudice.pdf', '..resources/files/The_Jungle_Book.pdf'], options)
  .then((bgf_registration) => {
    console.log(bgf_registration);
    bgf_registration.onprogress = e => {console.log(e, 'progress!! ', bgf_registration.downloaded)}
  });
}

navigator.serviceWorker.register('bgf_handler.js')
	.then((registration) => {
  	console.log(registration, 'registration successful');
    bgManager = registration.backgroundFetch;
    doFetch(bgManager);
  });
</script>
</body>
</html>
